<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kande VendTech - Product Catalog</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            min-height: 100vh;
        }
        .product-card {
            background: white;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -15px rgba(59, 130, 246, 0.2);
            border-color: #93c5fd;
        }
        .category-btn {
            background: white;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }
        .category-btn:hover {
            background: #eff6ff;
            border-color: #93c5fd;
        }
        .category-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            border-color: #3b82f6;
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.35);
        }
        .healthy-badge {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
        }
        .glass-header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid #e2e8f0;
        }
        .hero-gradient {
            background: linear-gradient(135deg, #eff6ff 0%, #e0e7ff 50%, #f3e8ff 100%);
            border: 1px solid #e2e8f0;
        }
        .price-good { color: #10B981; }
        .price-medium { color: #F59E0B; }
        .price-high { color: #EF4444; }
        input, select {
            background: white !important;
            border: 1px solid #e2e8f0 !important;
        }
        input:focus, select:focus {
            border-color: #3b82f6 !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
            outline: none;
        }
        .stat-card {
            background: white;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        .admin-only { display: none; }
        body.is-admin .admin-only { display: block; }
        body.is-admin .admin-only-flex { display: flex; }
        body.is-admin .admin-only-inline { display: inline; }
        .modal-overlay {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body class="font-sans">
    <!-- Admin Login Modal -->
    <div id="loginModal" class="fixed inset-0 z-[100] hidden items-center justify-center modal-overlay">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <div class="text-center mb-6">
                <img src="logo.png" alt="Kande VendTech" class="h-12 mx-auto mb-4">
                <h2 class="text-2xl font-bold text-gray-900">Admin Login</h2>
                <p class="text-gray-500 mt-2">Enter password to view pricing details</p>
            </div>
            <form id="loginForm">
                <input type="password" id="adminPassword" placeholder="Enter admin password" 
                       class="w-full px-4 py-3 rounded-xl text-center text-lg focus:outline-none mb-4">
                <p id="loginError" class="text-red-500 text-sm text-center mb-4 hidden">Incorrect password</p>
                <button type="submit" class="w-full py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-xl font-medium hover:from-primary-600 hover:to-primary-700 transition-all">
                    Login
                </button>
            </form>
            <button id="closeLoginModal" class="w-full py-3 text-gray-500 hover:text-gray-700 mt-3 text-sm">
                Continue as Guest
            </button>
        </div>
    </div>

    <!-- Header -->
    <header class="glass-header sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-24">
                <div class="flex items-center gap-3">
                    <img src="logo.png" alt="Kande VendTech" class="h-20">
                </div>
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search products..." 
                               class="w-64 pl-10 pr-4 py-2 rounded-xl text-sm focus:outline-none">
                        <svg class="absolute left-3 top-2.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                    <div class="text-sm text-gray-500 admin-only">
                        <span id="productCount" class="text-primary-600 font-semibold">0</span> products
                    </div>
                    <button id="adminLoginBtn" class="text-sm text-gray-400 hover:text-primary-600 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                    </button>
                    <span id="adminBadge" class="admin-only text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full font-medium">Admin</span>
                    <a href="export.html" class="admin-only text-sm text-gray-500 hover:text-primary-600 transition-colors flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Export
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Category Tabs -->
    <div class="border-b border-gray-200 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center gap-2 py-4 overflow-x-auto" id="categoryTabs">
                <button class="category-btn active px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap" data-category="all">
                    üèÜ All Products
                </button>
                <button class="category-btn px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap text-gray-600" data-category="healthy">
                    üí™ Healthy
                </button>
                <button class="category-btn px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap text-gray-600" data-category="snacks">
                    üç™ Snacks
                </button>
                <button class="category-btn px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap text-gray-600" data-category="candy">
                    üç¨ Candy
                </button>
                <button class="category-btn px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap text-gray-600" data-category="beverages">
                    ü•§ Beverages
                </button>
                <button class="category-btn px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap text-gray-600" data-category="meals">
                    ü•™ Meals
                </button>
                <button class="category-btn px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap text-gray-600" data-category="refrigerated">
                    üßä Refrigerated
                </button>
                <button class="category-btn px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap text-gray-600" data-category="frozen">
                    ‚ùÑÔ∏è Frozen
                </button>
                <button class="category-btn px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap text-gray-600 admin-only bg-red-50 text-red-600" data-category="hidden">
                    üö´ Hidden
                </button>
            </div>
        </div>
    </div>

    <!-- Filters Bar -->
    <div id="filtersBar" class="border-b border-gray-200 bg-white/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <div class="flex flex-wrap items-center gap-4">
                <div class="flex items-center gap-2">
                    <label class="text-sm text-gray-500">Sort by:</label>
                    <select id="sortSelect" class="rounded-lg px-3 py-1.5 text-sm focus:outline-none">
                        <option value="popularity">Popularity</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="name">Name A-Z</option>
                    </select>
                </div>
                <div class="flex items-center gap-2 admin-only">
                    <label class="text-sm text-gray-500">Brand:</label>
                    <select id="brandSelect" class="rounded-lg px-3 py-1.5 text-sm focus:outline-none">
                        <option value="">All Brands</option>
                    </select>
                </div>
                <div class="flex items-center gap-2 admin-only">
                    <label class="text-sm text-gray-500">Price Range:</label>
                    <select id="priceSelect" class="rounded-lg px-3 py-1.5 text-sm focus:outline-none">
                        <option value="">All Prices</option>
                        <option value="0-2">Under $2</option>
                        <option value="2-4">$2 - $4</option>
                        <option value="4-6">$4 - $6</option>
                        <option value="6+">$6+</option>
                    </select>
                </div>
                <div class="flex items-center gap-2 admin-only">
                    <label class="text-sm text-gray-500">
                        <input type="checkbox" id="showHiddenToggle" class="mr-1">
                        Show Hidden (<span id="hiddenCount">0</span>)
                    </label>
                </div>
                <button id="clearFilters" class="text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors admin-only">
                    Clear Filters
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Stats Banner (Admin Only) -->
        <div id="statsBanner" class="hero-gradient rounded-2xl p-8 mb-8 admin-only">
            <div class="flex flex-wrap items-center justify-between gap-6">
                <div>
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Product Pricing Catalog</h2>
                    <p class="text-gray-600">Wholesale costs with suggested vending prices (2x-3.5x markup)</p>
                </div>
                <div class="flex gap-6">
                    <div class="stat-card rounded-xl px-6 py-4 text-center">
                        <div class="text-3xl font-bold text-primary-600" id="totalProducts">0</div>
                        <div class="text-sm text-gray-500">Total Products</div>
                    </div>
                    <div class="stat-card rounded-xl px-6 py-4 text-center">
                        <div class="text-3xl font-bold text-primary-600" id="totalCategories">7</div>
                        <div class="text-sm text-gray-500">Categories</div>
                    </div>
                    <div class="stat-card rounded-xl px-6 py-4 text-center">
                        <div class="text-3xl font-bold text-primary-600" id="totalBrands">0</div>
                        <div class="text-sm text-gray-500">Brands</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Public Header (Non-Admin) -->
        <div id="publicHeader" class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Product Catalog</h1>
            <p class="text-gray-600">Browse our selection of snacks, beverages, and more</p>
        </div>

        <!-- Product Grid -->
        <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Products will be rendered here -->
        </div>

        <!-- Load More -->
        <div class="mt-8 text-center" id="loadMoreContainer">
            <button id="loadMoreBtn" class="px-8 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-xl font-medium hover:from-primary-600 hover:to-primary-700 transition-all shadow-lg shadow-primary-500/25 hover:shadow-primary-500/40">
                Load More Products
            </button>
        </div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-200 bg-white mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <img src="logo.png" alt="Kande VendTech" class="h-8">
                    <p class="text-sm text-gray-500">¬© 2026 Kande VendTech</p>
                </div>
                <a href="https://kandevendtech.com" class="text-sm text-primary-600 hover:text-primary-700">kandevendtech.com</a>
            </div>
        </div>
    </footer>

    <script src="products.js?v=29"></script>
    <script src="app.js?v=29"></script>
    <script>
        // Admin Authentication
        const ADMIN_PASSWORD = 'kande2026'; // Change this password
        let isAdmin = false;

        function checkAdminStatus() {
            // Check URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const adminParam = urlParams.get('admin');
            
            // Check localStorage
            const savedAdmin = localStorage.getItem('kandeAdmin');
            
            if (adminParam === ADMIN_PASSWORD || savedAdmin === 'true') {
                enableAdminMode();
            } else {
                disableAdminMode();
            }
        }

        function enableAdminMode() {
            isAdmin = true;
            document.body.classList.add('is-admin');
            document.getElementById('publicHeader').style.display = 'none';
            document.getElementById('adminLoginBtn').innerHTML = `
                <svg class="w-5 h-5 text-primary-600" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
            `;
            localStorage.setItem('kandeAdmin', 'true');
            if (typeof renderProducts === 'function') {
                renderProducts();
            }
        }

        function disableAdminMode() {
            isAdmin = false;
            document.body.classList.remove('is-admin');
            document.getElementById('publicHeader').style.display = 'block';
            localStorage.removeItem('kandeAdmin');
            if (typeof renderProducts === 'function') {
                renderProducts();
            }
        }

        // Login Modal
        document.getElementById('adminLoginBtn').addEventListener('click', () => {
            if (isAdmin) {
                disableAdminMode();
            } else {
                document.getElementById('loginModal').classList.remove('hidden');
                document.getElementById('loginModal').classList.add('flex');
                document.getElementById('adminPassword').focus();
            }
        });

        document.getElementById('closeLoginModal').addEventListener('click', () => {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('loginModal').classList.remove('flex');
        });

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                document.getElementById('loginModal').classList.add('hidden');
                document.getElementById('loginModal').classList.remove('flex');
                document.getElementById('adminPassword').value = '';
                document.getElementById('loginError').classList.add('hidden');
                enableAdminMode();
            } else {
                document.getElementById('loginError').classList.remove('hidden');
                document.getElementById('adminPassword').value = '';
            }
        });

        // Close modal on outside click
        document.getElementById('loginModal').addEventListener('click', (e) => {
            if (e.target.id === 'loginModal') {
                document.getElementById('loginModal').classList.add('hidden');
                document.getElementById('loginModal').classList.remove('flex');
            }
        });

        // Check admin status on load
        checkAdminStatus();

        // Expose isAdmin globally for app.js
        window.isAdmin = () => isAdmin;
    </script>
</body>
</html>
